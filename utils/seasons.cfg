#textdomain wesnoth-GambCiv

#define SEASON_TERRAIN TERRAIN LAYER FILTER
  [terrain]
    terrain = {TERRAIN}
    layer = {LAYER}
    [and]
      terrain = {FILTER}
    [/and]
  [/terrain]
#enddef

[event]
  name = new turn
  first_time_only = no
  [filter_condition]
    {VARCH GambCiv_disable_seasons not_equals "yes"}
    {VARCH turn_number equals $next_season_turn}
  [/filter_condition]

  [switch]
    variable = season
    [case]
      value = "winter"
      [fire_event]
	name = spring
      [/fire_event]
    [/case]
    [case]
      value = "spring"
      [fire_event]
	name = winter
      [/fire_event]
    [/case]
  [/switch]
[/event]

[event]
  name = winter
  first_time_only = no

  {VARIABLE season "winter"}
  [print]
    text = _ "WINTER"
    size = 24
    duration = 40
    red,green,blue = 255,255,255
  [/print]
  {SEASON_TERRAIN Ai both Ww,Wwg,Wwt}
  {SEASON_TERRAIN Aa base (G*^*,Rb^*,Re^*
  [not]
    terrain="*^Gvs"
  [/not])}
  {SEASON_TERRAIN Ha base H*^*}
  {SEASON_TERRAIN Ms base Mm^*,Md^*}
  {SEASON_TERRAIN ^Fpa overlay *^F*}
  {VARIABLE_OP next_season_turn rand "10..14"}
  {VARIABLE_OP next_season_turn add $turn_number}
[/event]

[event]
  name = spring
  first_time_only = no

  {VARIABLE season "spring"}
  [print]
    text = _ "SPRING"
    size = 24
    duration = 40
    red,green,blue = 200,50,50
  [/print]
  {SEASON_TERRAIN Ww both Ai}
  {SEASON_TERRAIN Gg base Aa^*}
  {SEASON_TERRAIN Hh base Ha^*}
  {SEASON_TERRAIN Mm base Ms^*}
  {SEASON_TERRAIN ^Fp overlay *^Fpa}
  [terrain]
    terrain = ^Fp
    layer = overlay
    [and]
      terrain = G*,H*
      [and]
	radius = 1
	terrain = *^F*
      [/and]
    [/and]
  [/terrain]
  {VARIABLE_OP next_season_turn rand "13..17"}
  {VARIABLE_OP next_season_turn add $turn_number}
[/event]
